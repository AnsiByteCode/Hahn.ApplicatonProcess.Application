{"version":3,"sources":["webpack:///./node_modules/aurelia-dialog/dist/native-modules/attach-focus.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/chunk.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/default-styles.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/native-dialog-renderer.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/ux-dialog-body.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/ux-dialog-footer.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/ux-dialog-header.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/ux-dialog-renderer.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/ux-dialog.js","webpack:///./node_modules/aurelia-dialog/dist/native-modules/aurelia-dialog.js"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+CAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEsB;AACvB;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,+BAA+B,yCAAyC,EAAE;AAC1E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,0BAA0B,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,kFAAkF;AAClF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAEgI;AACjI;;;;;;;;;AC7GA;AAAA,6BAA6B,SAAS,OAAO,eAAe,MAAM,QAAQ,UAAU,yBAAyB,UAAU,oBAAoB,cAAc,8BAA8B,UAAU,kBAAkB,gBAAgB,eAAe,MAAM,QAAQ,SAAS,OAAO,iCAAiC,2BAA2B,UAAU,wBAAwB,aAAa,4BAA4B,WAAW,cAAc,gBAAgB,uBAAuB,0BAA0B,kBAAkB,wBAAwB,2BAA2B,mBAAmB,YAAY,wEAAwE,UAAU,UAAU,WAAW,cAAc,qCAAqC,gCAAgC,kBAAkB,UAAU,gBAAgB,uBAAuB,0BAA0B,kBAAkB,wBAAwB,2BAA2B,mBAAmB,YAAY,yBAAyB,wBAAwB,qBAAqB,sBAAsB,4BAA4B,gBAAgB,2BAA2B,cAAc,aAAa,gCAAgC,kCAAkC,YAAY,YAAY,cAAc,WAAW,YAAY,gBAAgB,eAAe,iBAAiB,uBAAuB,UAAU,eAAe,yBAAyB,cAAc,aAAa,2BAA2B,cAAc,YAAY,6BAA6B,iBAAiB,kCAAkC,WAAW,sBAAsB,iBAAiB,eAAe,kBAAkB,mBAAmB,sBAAsB,8BAA8B,0BAA0B,eAAe,sBAAsB,sBAAsB,kBAAkB,qBAAqB,2CAA2C,eAAe,YAAY,gDAAgD,WAAW,yBAAyB,qBAAqB,gBAAgB,gBAAgB;;AAE5/D,kEAAG,EAAC;AACnB;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACuB;AACgB;;AAEzE;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+CAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+CAAG;AACf;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+CAAG;AACxC;AACA,6BAA6B,+CAAG;AAChC;AACA,+BAA+B,+CAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oCAAoC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8EAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4EAAa;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,+CAAG;AAChD;AACA;AACA;AACA;AACA,mBAAmB,+CAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,4BAA4B,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA,iDAAiD,8BAA8B,EAAE;AACjF,+BAA+B,gCAAgC,EAAE;AACjE;AACA;AACA;AACA;AACA,QAAQ,8EAAS;AACjB;AACA;AACA,CAAC;;AAE+B;AAChC;;;;;;;;;AC1MA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEuB;AACxB;;;;;;;;;ACTA;AAAA;AAAA;AAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2CAAgB;AAC7C,4PAA4P,OAAO;AACnQ;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEyB;AAC1B;;;;;;;;;AClCA;AAAA;AAAA;AAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2CAAgB;AAC7C,iPAAiP;AACjP;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEyB;AAC1B;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACuB;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,+CAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,+CAAG;AACpB;AACA;AACA;AACA;AACA,iFAAiF,+BAA+B,EAAE;AAClH;AACA;AACA,8CAA8C,+CAAG;AACjD;AACA,uCAAuC,+BAA+B,EAAE;AACxE;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+CAAG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+CAAG;AACf;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+CAAG;AACxC;AACA,6BAA6B,+CAAG;AAChC;AACA,qDAAqD,+CAAG;AACxD;AACA,iDAAiD,+CAAG;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oCAAoC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+CAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,+CAAG;AAChD;AACA;AACA;AACA;AACA,mBAAmB,+CAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,4BAA4B,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA,iDAAiD,8BAA8B,EAAE;AACjF,+BAA+B,gCAAgC,EAAE;AACjE;AACA;AACA;AACA,CAAC;AACD,8EAAS;;AAEqF;AAC9F;;;;;;;;;AC1OA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAEmB;AACpB;;;;;;;;;ACTA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACO;AAC3F;AACuB;AACQ;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,kCAAkC;AAC5F;AACA;AACA,CAAC;;AAED;AACA,qBAAqB,QAAQ,0KAAiC,oBAAoB,yBAAyB,EAAE,EAAE,EAAE;AACjH,yBAAyB,QAAQ,8KAAqC,oBAAoB,+BAA+B,EAAE,EAAE;AAC7H;AACA;AACA,8BAA8B,QAAQ,iKAAwB,oBAAoB,mBAAmB,EAAE,EAAE,EAAE;AAC3G,qCAAqC,QAAQ,wKAA+B,oBAAoB,yBAAyB,EAAE,EAAE,EAAE;AAC/H,mCAAmC,QAAQ,sKAA6B,oBAAoB,uBAAuB,EAAE,EAAE,EAAE;AACzH,qCAAqC,QAAQ,wKAA+B,oBAAoB,yBAAyB,EAAE,EAAE,EAAE;AAC/H,iCAAiC,QAAQ,oKAA2B,oBAAoB,sBAAsB,EAAE,EAAE;AAClH;AACA,oCAAoC,QAAQ,sKAA6B,uBAAuB,wBAAwB,EAAE,EAAE;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAAQ;AACvC;AACA,gBAAgB,+CAAG;AACnB;AACA;AACA,0DAA0D,kCAAkC,EAAE;AAC9F;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,mCAAmC,2CAA2C,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,2DAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,cAAc,mDAAuB;AACrC;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,oBAAoB,mDAAe;AACnC;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qDAAqD,2CAAgB;AACrE,wCAAwC,2CAAgB;AACxD;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mBAAmB,mDAAe;AAClC,SAAS;AACT;AACA;AACA;AACA;AACA,mCAAmC,UAAU,8EAA8E,EAAE,EAAE;AAC/H,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,yDAAyD,aAAa,EAAE;AACxE;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,wCAAwC,wDAAwD,mBAAmB,EAAE,EAAE,EAAE;AAClI;AACA,4BAA4B,sEAAS,EAAE,oEAAiB;AACxD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4EAA4E,qBAAqB,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEgF;AAChF","file":"npm.aurelia-dialog.4468a80e85f24f4d610d.js","sourcesContent":["import { DOM } from 'aurelia-pal';\n\nvar AttachFocus = (function () {\r\n    function AttachFocus(element) {\r\n        this.element = element;\r\n        this.value = true;\r\n    }\r\n    AttachFocus.inject = function () {\r\n        return [DOM.Element];\r\n    };\r\n    AttachFocus.prototype.attached = function () {\r\n        if (this.value === '' || (this.value && this.value !== 'false')) {\r\n            this.element.focus();\r\n        }\r\n    };\r\n    AttachFocus.$resource = {\r\n        type: 'attribute',\r\n        name: 'attach-focus'\r\n    };\r\n    return AttachFocus;\r\n}());\n\nexport { AttachFocus };\n//# sourceMappingURL=attach-focus.js.map\n","var Renderer = (function () {\r\n    function Renderer() {\r\n    }\r\n    Renderer.prototype.getDialogContainer = function () {\r\n        throw new Error('DialogRenderer must implement getDialogContainer().');\r\n    };\r\n    Renderer.prototype.showDialog = function (dialogController) {\r\n        throw new Error('DialogRenderer must implement showDialog().');\r\n    };\r\n    Renderer.prototype.hideDialog = function (dialogController) {\r\n        throw new Error('DialogRenderer must implement hideDialog().');\r\n    };\r\n    return Renderer;\r\n}());\n\nfunction createDialogCancelError(output) {\r\n    var error = new Error('Operation cancelled.');\r\n    error.wasCancelled = true;\r\n    error.output = output;\r\n    return error;\r\n}\n\nfunction createDialogCloseError(output) {\r\n    var error = new Error();\r\n    error.wasCancelled = false;\r\n    error.output = output;\r\n    return error;\r\n}\n\nfunction invokeLifecycle(instance, name, model) {\r\n    if (typeof instance[name] === 'function') {\r\n        return new Promise(function (resolve) {\r\n            resolve(instance[name](model));\r\n        }).then(function (result) {\r\n            if (result !== null && result !== undefined) {\r\n                return result;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    return Promise.resolve(true);\r\n}\n\nvar DialogController = (function () {\r\n    function DialogController(renderer, settings, resolve, reject) {\r\n        this.resolve = resolve;\r\n        this.reject = reject;\r\n        this.settings = settings;\r\n        this.renderer = renderer;\r\n    }\r\n    DialogController.prototype.releaseResources = function (result) {\r\n        var _this = this;\r\n        return invokeLifecycle(this.controller.viewModel || {}, 'deactivate', result)\r\n            .then(function () { return _this.renderer.hideDialog(_this); })\r\n            .then(function () {\r\n            _this.controller.unbind();\r\n        });\r\n    };\r\n    DialogController.prototype.cancelOperation = function () {\r\n        if (!this.settings.rejectOnCancel) {\r\n            return { wasCancelled: true };\r\n        }\r\n        throw createDialogCancelError();\r\n    };\r\n    DialogController.prototype.ok = function (output) {\r\n        return this.close(true, output);\r\n    };\r\n    DialogController.prototype.cancel = function (output) {\r\n        return this.close(false, output);\r\n    };\r\n    DialogController.prototype.error = function (output) {\r\n        var _this = this;\r\n        var closeError = createDialogCloseError(output);\r\n        return this.releaseResources(closeError).then(function () { _this.reject(closeError); });\r\n    };\r\n    DialogController.prototype.close = function (ok, output) {\r\n        var _this = this;\r\n        if (this.closePromise) {\r\n            return this.closePromise;\r\n        }\r\n        var dialogResult = { wasCancelled: !ok, output: output };\r\n        return this.closePromise = invokeLifecycle(this.controller.viewModel || {}, 'canDeactivate', dialogResult)\r\n            .catch(function (reason) {\r\n            _this.closePromise = undefined;\r\n            return Promise.reject(reason);\r\n        }).then(function (canDeactivate) {\r\n            if (!canDeactivate) {\r\n                _this.closePromise = undefined;\r\n                return _this.cancelOperation();\r\n            }\r\n            return _this.releaseResources(dialogResult).then(function () {\r\n                if (!_this.settings.rejectOnCancel || ok) {\r\n                    _this.resolve(dialogResult);\r\n                }\r\n                else {\r\n                    _this.reject(createDialogCancelError(output));\r\n                }\r\n                return { wasCancelled: false };\r\n            }).catch(function (reason) {\r\n                _this.closePromise = undefined;\r\n                return Promise.reject(reason);\r\n            });\r\n        });\r\n    };\r\n    DialogController.inject = [Renderer];\r\n    return DialogController;\r\n}());\n\nexport { Renderer as a, createDialogCancelError as b, invokeLifecycle as c, DialogController as d, createDialogCloseError as e };\n//# sourceMappingURL=chunk.js.map\n","var css = \"ux-dialog-overlay{bottom:0;left:0;position:fixed;top:0;right:0;opacity:0}ux-dialog-overlay.active{opacity:1}ux-dialog-container{display:block;transition:opacity .2s linear;opacity:0;overflow-x:hidden;overflow-y:auto;position:fixed;top:0;right:0;bottom:0;left:0;-webkit-overflow-scrolling:touch}ux-dialog-container.active{opacity:1}ux-dialog-container>div{padding:30px}ux-dialog-container>div>div{width:100%;display:block;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto}ux-dialog-container,ux-dialog-container>div,ux-dialog-container>div>div{outline:0}ux-dialog{width:100%;display:table;box-shadow:0 5px 15px rgba(0,0,0,.5);border:1px solid rgba(0,0,0,.2);border-radius:5px;padding:3;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border-image-source:none;border-image-slice:100%;border-image-width:1;border-image-outset:0;border-image-repeat:initial;background:#fff}ux-dialog>ux-dialog-header{display:block;padding:16px;border-bottom:1px solid #e5e5e5}ux-dialog>ux-dialog-header>button{float:right;border:none;display:block;width:32px;height:32px;background:none;font-size:22px;line-height:16px;margin:-14px -16px 0 0;padding:0;cursor:pointer}ux-dialog>ux-dialog-body{display:block;padding:16px}ux-dialog>ux-dialog-footer{display:block;padding:6px;border-top:1px solid #e5e5e5;text-align:right}ux-dialog>ux-dialog-footer button{color:#333;background-color:#fff;padding:6px 12px;font-size:14px;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid #ccc;border-radius:4px;margin:5px 0 5px 5px}ux-dialog>ux-dialog-footer button:disabled{cursor:default;opacity:.45}ux-dialog>ux-dialog-footer button:hover:enabled{color:#333;background-color:#e6e6e6;border-color:#adadad}.ux-dialog-open{overflow:hidden}\";\n\nexport default css;\n//# sourceMappingURL=default-styles.js.map\n","import { DOM } from 'aurelia-pal';\nimport { transient } from 'aurelia-dependency-injection';\nimport { transitionEvent, hasTransition } from './ux-dialog-renderer.js';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\nvar containerTagName = 'dialog';\r\nvar body;\r\nvar NativeDialogRenderer = (function () {\r\n    function NativeDialogRenderer() {\r\n    }\r\n    NativeDialogRenderer_1 = NativeDialogRenderer;\r\n    NativeDialogRenderer.keyboardEventHandler = function (e) {\r\n        var key = (e.code || e.key) === 'Enter' || e.keyCode === 13\r\n            ? 'Enter'\r\n            : undefined;\r\n        if (!key) {\r\n            return;\r\n        }\r\n        var top = NativeDialogRenderer_1.dialogControllers[NativeDialogRenderer_1.dialogControllers.length - 1];\r\n        if (!top || !top.settings.keyboard) {\r\n            return;\r\n        }\r\n        var keyboard = top.settings.keyboard;\r\n        if (key === 'Enter' && (keyboard === key || (Array.isArray(keyboard) && keyboard.indexOf(key) > -1))) {\r\n            top.ok();\r\n        }\r\n    };\r\n    NativeDialogRenderer.trackController = function (dialogController) {\r\n        if (!NativeDialogRenderer_1.dialogControllers.length) {\r\n            DOM.addEventListener('keyup', NativeDialogRenderer_1.keyboardEventHandler, false);\r\n        }\r\n        NativeDialogRenderer_1.dialogControllers.push(dialogController);\r\n    };\r\n    NativeDialogRenderer.untrackController = function (dialogController) {\r\n        var i = NativeDialogRenderer_1.dialogControllers.indexOf(dialogController);\r\n        if (i !== -1) {\r\n            NativeDialogRenderer_1.dialogControllers.splice(i, 1);\r\n        }\r\n        if (!NativeDialogRenderer_1.dialogControllers.length) {\r\n            DOM.removeEventListener('keyup', NativeDialogRenderer_1.keyboardEventHandler, false);\r\n        }\r\n    };\r\n    NativeDialogRenderer.prototype.getOwnElements = function (parent, selector) {\r\n        var elements = parent.querySelectorAll(selector);\r\n        var own = [];\r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (elements[i].parentElement === parent) {\r\n                own.push(elements[i]);\r\n            }\r\n        }\r\n        return own;\r\n    };\r\n    NativeDialogRenderer.prototype.attach = function (dialogController) {\r\n        if (dialogController.settings.restoreFocus) {\r\n            this.lastActiveElement = DOM.activeElement;\r\n        }\r\n        var spacingWrapper = DOM.createElement('div');\r\n        spacingWrapper.appendChild(this.anchor);\r\n        this.dialogContainer = DOM.createElement(containerTagName);\r\n        if (window.dialogPolyfill) {\r\n            window.dialogPolyfill.registerDialog(this.dialogContainer);\r\n        }\r\n        this.dialogContainer.appendChild(spacingWrapper);\r\n        var lastContainer = this.getOwnElements(this.host, containerTagName).pop();\r\n        if (lastContainer && lastContainer.parentElement) {\r\n            this.host.insertBefore(this.dialogContainer, lastContainer.nextSibling);\r\n        }\r\n        else {\r\n            this.host.insertBefore(this.dialogContainer, this.host.firstChild);\r\n        }\r\n        dialogController.controller.attached();\r\n        this.host.classList.add('ux-dialog-open');\r\n    };\r\n    NativeDialogRenderer.prototype.detach = function (dialogController) {\r\n        if (this.dialogContainer.hasAttribute('open')) {\r\n            this.dialogContainer.close();\r\n        }\r\n        this.host.removeChild(this.dialogContainer);\r\n        dialogController.controller.detached();\r\n        if (!NativeDialogRenderer_1.dialogControllers.length) {\r\n            this.host.classList.remove('ux-dialog-open');\r\n        }\r\n        if (dialogController.settings.restoreFocus) {\r\n            dialogController.settings.restoreFocus(this.lastActiveElement);\r\n        }\r\n    };\r\n    NativeDialogRenderer.prototype.setAsActive = function () {\r\n        this.dialogContainer.showModal();\r\n        this.dialogContainer.classList.add('active');\r\n    };\r\n    NativeDialogRenderer.prototype.setAsInactive = function () {\r\n        this.dialogContainer.classList.remove('active');\r\n    };\r\n    NativeDialogRenderer.prototype.setupEventHandling = function (dialogController) {\r\n        this.stopPropagation = function (e) { e._aureliaDialogHostClicked = true; };\r\n        this.closeDialogClick = function (e) {\r\n            if (dialogController.settings.overlayDismiss && !e._aureliaDialogHostClicked) {\r\n                dialogController.cancel();\r\n            }\r\n        };\r\n        this.dialogCancel = function (e) {\r\n            var keyboard = dialogController.settings.keyboard;\r\n            var key = 'Escape';\r\n            if (keyboard === true || keyboard === key || (Array.isArray(keyboard) && keyboard.indexOf(key) > -1)) {\r\n                dialogController.cancel();\r\n            }\r\n            else {\r\n                e.preventDefault();\r\n            }\r\n        };\r\n        var mouseEvent = dialogController.settings.mouseEvent || 'click';\r\n        this.dialogContainer.addEventListener(mouseEvent, this.closeDialogClick);\r\n        this.dialogContainer.addEventListener('cancel', this.dialogCancel);\r\n        this.anchor.addEventListener(mouseEvent, this.stopPropagation);\r\n    };\r\n    NativeDialogRenderer.prototype.clearEventHandling = function (dialogController) {\r\n        var mouseEvent = dialogController.settings.mouseEvent || 'click';\r\n        this.dialogContainer.removeEventListener(mouseEvent, this.closeDialogClick);\r\n        this.dialogContainer.removeEventListener('cancel', this.dialogCancel);\r\n        this.anchor.removeEventListener(mouseEvent, this.stopPropagation);\r\n    };\r\n    NativeDialogRenderer.prototype.awaitTransition = function (setActiveInactive, ignore) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var renderer = _this;\r\n            var eventName = transitionEvent();\r\n            function onTransitionEnd(e) {\r\n                if (e.target !== renderer.dialogContainer) {\r\n                    return;\r\n                }\r\n                renderer.dialogContainer.removeEventListener(eventName, onTransitionEnd);\r\n                resolve();\r\n            }\r\n            if (ignore || !hasTransition(_this.dialogContainer)) {\r\n                resolve();\r\n            }\r\n            else {\r\n                _this.dialogContainer.addEventListener(eventName, onTransitionEnd);\r\n            }\r\n            setActiveInactive();\r\n        });\r\n    };\r\n    NativeDialogRenderer.prototype.getDialogContainer = function () {\r\n        return this.anchor || (this.anchor = DOM.createElement('div'));\r\n    };\r\n    NativeDialogRenderer.prototype.showDialog = function (dialogController) {\r\n        var _this = this;\r\n        if (!body) {\r\n            body = DOM.querySelector('body');\r\n        }\r\n        if (dialogController.settings.host) {\r\n            this.host = dialogController.settings.host;\r\n        }\r\n        else {\r\n            this.host = body;\r\n        }\r\n        var settings = dialogController.settings;\r\n        this.attach(dialogController);\r\n        if (typeof settings.position === 'function') {\r\n            settings.position(this.dialogContainer);\r\n        }\r\n        NativeDialogRenderer_1.trackController(dialogController);\r\n        this.setupEventHandling(dialogController);\r\n        return this.awaitTransition(function () { return _this.setAsActive(); }, dialogController.settings.ignoreTransitions);\r\n    };\r\n    NativeDialogRenderer.prototype.hideDialog = function (dialogController) {\r\n        var _this = this;\r\n        this.clearEventHandling(dialogController);\r\n        NativeDialogRenderer_1.untrackController(dialogController);\r\n        return this.awaitTransition(function () { return _this.setAsInactive(); }, dialogController.settings.ignoreTransitions)\r\n            .then(function () { _this.detach(dialogController); });\r\n    };\r\n    var NativeDialogRenderer_1;\r\n    NativeDialogRenderer.dialogControllers = [];\r\n    NativeDialogRenderer = NativeDialogRenderer_1 = __decorate([\r\n        transient()\r\n    ], NativeDialogRenderer);\r\n    return NativeDialogRenderer;\r\n}());\n\nexport { NativeDialogRenderer };\n//# sourceMappingURL=native-dialog-renderer.js.map\n","var UxDialogBody = (function () {\r\n    function UxDialogBody() {\r\n    }\r\n    UxDialogBody.$view = \"<template><slot></slot></template>\";\r\n    UxDialogBody.$resource = 'ux-dialog-body';\r\n    return UxDialogBody;\r\n}());\n\nexport { UxDialogBody };\n//# sourceMappingURL=ux-dialog-body.js.map\n","import { d as DialogController } from './chunk.js';\n\nvar UxDialogFooter = (function () {\r\n    function UxDialogFooter(controller) {\r\n        this.controller = controller;\r\n        this.buttons = [];\r\n        this.useDefaultButtons = false;\r\n    }\r\n    UxDialogFooter.isCancelButton = function (value) {\r\n        return value === 'Cancel';\r\n    };\r\n    UxDialogFooter.prototype.close = function (buttonValue) {\r\n        if (UxDialogFooter.isCancelButton(buttonValue)) {\r\n            this.controller.cancel(buttonValue);\r\n        }\r\n        else {\r\n            this.controller.ok(buttonValue);\r\n        }\r\n    };\r\n    UxDialogFooter.prototype.useDefaultButtonsChanged = function (newValue) {\r\n        if (newValue) {\r\n            this.buttons = ['Cancel', 'Ok'];\r\n        }\r\n    };\r\n    UxDialogFooter.inject = [DialogController];\r\n    UxDialogFooter.$view = \"<template>\\n  <slot></slot>\\n  <template if.bind=\\\"buttons.length > 0\\\">\\n    <button type=\\\"button\\\"\\n      class=\\\"btn btn-default\\\"\\n      repeat.for=\\\"button of buttons\\\"\\n      click.trigger=\\\"close(button)\\\">\\n      ${button}\\n    </button>\\n  </template>\\n</template>\";\r\n    UxDialogFooter.$resource = {\r\n        name: 'ux-dialog-footer',\r\n        bindables: ['buttons', 'useDefaultButtons']\r\n    };\r\n    return UxDialogFooter;\r\n}());\n\nexport { UxDialogFooter };\n//# sourceMappingURL=ux-dialog-footer.js.map\n","import { d as DialogController } from './chunk.js';\n\nvar UxDialogHeader = (function () {\r\n    function UxDialogHeader(controller) {\r\n        this.controller = controller;\r\n    }\r\n    UxDialogHeader.prototype.bind = function () {\r\n        if (typeof this.showCloseButton !== 'boolean') {\r\n            this.showCloseButton = !this.controller.settings.lock;\r\n        }\r\n    };\r\n    UxDialogHeader.inject = [DialogController];\r\n    UxDialogHeader.$view = \"<template>\\n  <button\\n    type=\\\"button\\\"\\n    class=\\\"dialog-close\\\"\\n    aria-label=\\\"Close\\\"\\n    if.bind=\\\"showCloseButton\\\"\\n    click.trigger=\\\"controller.cancel()\\\">\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n\\n  <div class=\\\"dialog-header-content\\\">\\n    <slot></slot>\\n  </div>\\n</template>\";\r\n    UxDialogHeader.$resource = {\r\n        name: 'ux-dialog-header',\r\n        bindables: ['showCloseButton']\r\n    };\r\n    return UxDialogHeader;\r\n}());\n\nexport { UxDialogHeader };\n//# sourceMappingURL=ux-dialog-header.js.map\n","import { DOM } from 'aurelia-pal';\nimport { transient } from 'aurelia-dependency-injection';\n\nvar containerTagName = 'ux-dialog-container';\r\nvar overlayTagName = 'ux-dialog-overlay';\r\nvar transitionEvent = (function () {\r\n    var transition;\r\n    return function () {\r\n        if (transition) {\r\n            return transition;\r\n        }\r\n        var el = DOM.createElement('fakeelement');\r\n        var transitions = {\r\n            transition: 'transitionend',\r\n            OTransition: 'oTransitionEnd',\r\n            MozTransition: 'transitionend',\r\n            WebkitTransition: 'webkitTransitionEnd'\r\n        };\r\n        for (var t in transitions) {\r\n            if (el.style[t] !== undefined) {\r\n                transition = transitions[t];\r\n                return transition;\r\n            }\r\n        }\r\n        return '';\r\n    };\r\n})();\r\nvar hasTransition = (function () {\r\n    var unprefixedName = 'transitionDuration';\r\n    var prefixedNames = ['webkitTransitionDuration', 'oTransitionDuration'];\r\n    var el;\r\n    var transitionDurationName;\r\n    return function (element) {\r\n        if (!el) {\r\n            el = DOM.createElement('fakeelement');\r\n            if (unprefixedName in el.style) {\r\n                transitionDurationName = unprefixedName;\r\n            }\r\n            else {\r\n                transitionDurationName = prefixedNames.find(function (prefixed) { return (prefixed in el.style); });\r\n            }\r\n        }\r\n        return !!transitionDurationName && !!(DOM.getComputedStyle(element)[transitionDurationName]\r\n            .split(',')\r\n            .find(function (duration) { return !!parseFloat(duration); }));\r\n    };\r\n})();\r\nvar body;\r\nfunction getActionKey(e) {\r\n    if ((e.code || e.key) === 'Escape' || e.keyCode === 27) {\r\n        return 'Escape';\r\n    }\r\n    if ((e.code || e.key) === 'Enter' || e.keyCode === 13) {\r\n        return 'Enter';\r\n    }\r\n    return undefined;\r\n}\r\nvar DialogRenderer = (function () {\r\n    function DialogRenderer() {\r\n    }\r\n    DialogRenderer.keyboardEventHandler = function (e) {\r\n        var key = getActionKey(e);\r\n        if (!key) {\r\n            return;\r\n        }\r\n        var top = DialogRenderer.dialogControllers[DialogRenderer.dialogControllers.length - 1];\r\n        if (!top || !top.settings.keyboard) {\r\n            return;\r\n        }\r\n        var keyboard = top.settings.keyboard;\r\n        if (key === 'Escape'\r\n            && (keyboard === true || keyboard === key || (Array.isArray(keyboard) && keyboard.indexOf(key) > -1))) {\r\n            top.cancel();\r\n        }\r\n        else if (key === 'Enter' && (keyboard === key || (Array.isArray(keyboard) && keyboard.indexOf(key) > -1))) {\r\n            top.ok();\r\n        }\r\n    };\r\n    DialogRenderer.trackController = function (dialogController) {\r\n        var trackedDialogControllers = DialogRenderer.dialogControllers;\r\n        if (!trackedDialogControllers.length) {\r\n            DOM.addEventListener(dialogController.settings.keyEvent || 'keyup', DialogRenderer.keyboardEventHandler, false);\r\n        }\r\n        trackedDialogControllers.push(dialogController);\r\n    };\r\n    DialogRenderer.untrackController = function (dialogController) {\r\n        var trackedDialogControllers = DialogRenderer.dialogControllers;\r\n        var i = trackedDialogControllers.indexOf(dialogController);\r\n        if (i !== -1) {\r\n            trackedDialogControllers.splice(i, 1);\r\n        }\r\n        if (!trackedDialogControllers.length) {\r\n            DOM.removeEventListener(dialogController.settings.keyEvent || 'keyup', DialogRenderer.keyboardEventHandler, false);\r\n        }\r\n    };\r\n    DialogRenderer.prototype.getOwnElements = function (parent, selector) {\r\n        var elements = parent.querySelectorAll(selector);\r\n        var own = [];\r\n        for (var i = 0; i < elements.length; i++) {\r\n            if (elements[i].parentElement === parent) {\r\n                own.push(elements[i]);\r\n            }\r\n        }\r\n        return own;\r\n    };\r\n    DialogRenderer.prototype.attach = function (dialogController) {\r\n        if (dialogController.settings.restoreFocus) {\r\n            this.lastActiveElement = DOM.activeElement;\r\n        }\r\n        var spacingWrapper = DOM.createElement('div');\r\n        spacingWrapper.appendChild(this.anchor);\r\n        var dialogContainer = this.dialogContainer = DOM.createElement(containerTagName);\r\n        dialogContainer.appendChild(spacingWrapper);\r\n        var dialogOverlay = this.dialogOverlay = DOM.createElement(overlayTagName);\r\n        var zIndex = typeof dialogController.settings.startingZIndex === 'number'\r\n            ? dialogController.settings.startingZIndex + ''\r\n            : 'auto';\r\n        dialogOverlay.style.zIndex = zIndex;\r\n        dialogContainer.style.zIndex = zIndex;\r\n        var host = this.host;\r\n        var lastContainer = this.getOwnElements(host, containerTagName).pop();\r\n        if (lastContainer && lastContainer.parentElement) {\r\n            host.insertBefore(dialogContainer, lastContainer.nextSibling);\r\n            host.insertBefore(dialogOverlay, lastContainer.nextSibling);\r\n        }\r\n        else {\r\n            host.insertBefore(dialogContainer, host.firstChild);\r\n            host.insertBefore(dialogOverlay, host.firstChild);\r\n        }\r\n        dialogController.controller.attached();\r\n        host.classList.add('ux-dialog-open');\r\n    };\r\n    DialogRenderer.prototype.detach = function (dialogController) {\r\n        var host = this.host;\r\n        host.removeChild(this.dialogOverlay);\r\n        host.removeChild(this.dialogContainer);\r\n        dialogController.controller.detached();\r\n        if (!DialogRenderer.dialogControllers.length) {\r\n            host.classList.remove('ux-dialog-open');\r\n        }\r\n        if (dialogController.settings.restoreFocus) {\r\n            dialogController.settings.restoreFocus(this.lastActiveElement);\r\n        }\r\n    };\r\n    DialogRenderer.prototype.setAsActive = function () {\r\n        this.dialogOverlay.classList.add('active');\r\n        this.dialogContainer.classList.add('active');\r\n    };\r\n    DialogRenderer.prototype.setAsInactive = function () {\r\n        this.dialogOverlay.classList.remove('active');\r\n        this.dialogContainer.classList.remove('active');\r\n    };\r\n    DialogRenderer.prototype.setupEventHandling = function (dialogController) {\r\n        this.stopPropagation = function (e) { e._aureliaDialogHostClicked = true; };\r\n        this.closeDialogClick = function (e) {\r\n            if (dialogController.settings.overlayDismiss && !e._aureliaDialogHostClicked) {\r\n                dialogController.cancel();\r\n            }\r\n        };\r\n        var mouseEvent = dialogController.settings.mouseEvent || 'click';\r\n        this.dialogContainer.addEventListener(mouseEvent, this.closeDialogClick);\r\n        this.anchor.addEventListener(mouseEvent, this.stopPropagation);\r\n    };\r\n    DialogRenderer.prototype.clearEventHandling = function (dialogController) {\r\n        var mouseEvent = dialogController.settings.mouseEvent || 'click';\r\n        this.dialogContainer.removeEventListener(mouseEvent, this.closeDialogClick);\r\n        this.anchor.removeEventListener(mouseEvent, this.stopPropagation);\r\n    };\r\n    DialogRenderer.prototype.centerDialog = function () {\r\n        var child = this.dialogContainer.children[0];\r\n        var vh = Math.max(DOM.querySelectorAll('html')[0].clientHeight, window.innerHeight || 0);\r\n        child.style.marginTop = Math.max((vh - child.offsetHeight) / 2, 30) + 'px';\r\n        child.style.marginBottom = Math.max((vh - child.offsetHeight) / 2, 30) + 'px';\r\n    };\r\n    DialogRenderer.prototype.awaitTransition = function (setActiveInactive, ignore) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var renderer = _this;\r\n            var eventName = transitionEvent();\r\n            function onTransitionEnd(e) {\r\n                if (e.target !== renderer.dialogContainer) {\r\n                    return;\r\n                }\r\n                renderer.dialogContainer.removeEventListener(eventName, onTransitionEnd);\r\n                resolve();\r\n            }\r\n            if (ignore || !hasTransition(_this.dialogContainer)) {\r\n                resolve();\r\n            }\r\n            else {\r\n                _this.dialogContainer.addEventListener(eventName, onTransitionEnd);\r\n            }\r\n            setActiveInactive();\r\n        });\r\n    };\r\n    DialogRenderer.prototype.getDialogContainer = function () {\r\n        return this.anchor || (this.anchor = DOM.createElement('div'));\r\n    };\r\n    DialogRenderer.prototype.showDialog = function (dialogController) {\r\n        var _this = this;\r\n        if (!body) {\r\n            body = DOM.querySelector('body');\r\n        }\r\n        if (dialogController.settings.host) {\r\n            this.host = dialogController.settings.host;\r\n        }\r\n        else {\r\n            this.host = body;\r\n        }\r\n        var settings = dialogController.settings;\r\n        this.attach(dialogController);\r\n        if (typeof settings.position === 'function') {\r\n            settings.position(this.dialogContainer, this.dialogOverlay);\r\n        }\r\n        else if (!settings.centerHorizontalOnly) {\r\n            this.centerDialog();\r\n        }\r\n        DialogRenderer.trackController(dialogController);\r\n        this.setupEventHandling(dialogController);\r\n        return this.awaitTransition(function () { return _this.setAsActive(); }, dialogController.settings.ignoreTransitions);\r\n    };\r\n    DialogRenderer.prototype.hideDialog = function (dialogController) {\r\n        var _this = this;\r\n        this.clearEventHandling(dialogController);\r\n        DialogRenderer.untrackController(dialogController);\r\n        return this.awaitTransition(function () { return _this.setAsInactive(); }, dialogController.settings.ignoreTransitions)\r\n            .then(function () { _this.detach(dialogController); });\r\n    };\r\n    DialogRenderer.dialogControllers = [];\r\n    return DialogRenderer;\r\n}());\r\ntransient()(DialogRenderer);\n\nexport { DialogRenderer, DialogRenderer as UxDialogRenderer, hasTransition, transitionEvent };\n//# sourceMappingURL=ux-dialog-renderer.js.map\n","var UxDialog = (function () {\r\n    function UxDialog() {\r\n    }\r\n    UxDialog.$view = \"<template><slot></slot></template>\";\r\n    UxDialog.$resource = 'ux-dialog';\r\n    return UxDialog;\r\n}());\n\nexport { UxDialog };\n//# sourceMappingURL=ux-dialog.js.map\n","import { a as Renderer, b as createDialogCancelError, c as invokeLifecycle, d as DialogController } from './chunk.js';\nexport { d as DialogController, a as Renderer, b as createDialogCancelError, e as createDialogCloseError } from './chunk.js';\nimport { DOM } from 'aurelia-pal';\nimport { Container } from 'aurelia-dependency-injection';\nimport { ViewSlot, CompositionEngine } from 'aurelia-templating';\n\nvar DefaultDialogSettings = (function () {\r\n    function DefaultDialogSettings() {\r\n        this.lock = true;\r\n        this.startingZIndex = 1000;\r\n        this.centerHorizontalOnly = false;\r\n        this.rejectOnCancel = false;\r\n        this.ignoreTransitions = false;\r\n        this.restoreFocus = function (lastActiveElement) { return lastActiveElement.focus(); };\r\n    }\r\n    return DefaultDialogSettings;\r\n}());\n\nvar RENDERRERS = {\r\n    ux: function () { return import('./ux-dialog-renderer.js').then(function (m) { return m.DialogRenderer; }); },\r\n    native: function () { return import('./native-dialog-renderer.js').then(function (m) { return m.NativeDialogRenderer; }); }\r\n};\r\nvar DEFAULT_RESOURCES = {\r\n    'ux-dialog': function () { return import('./ux-dialog.js').then(function (m) { return m.UxDialog; }); },\r\n    'ux-dialog-header': function () { return import('./ux-dialog-header.js').then(function (m) { return m.UxDialogHeader; }); },\r\n    'ux-dialog-body': function () { return import('./ux-dialog-body.js').then(function (m) { return m.UxDialogBody; }); },\r\n    'ux-dialog-footer': function () { return import('./ux-dialog-footer.js').then(function (m) { return m.UxDialogFooter; }); },\r\n    'attach-focus': function () { return import('./attach-focus.js').then(function (m) { return m.AttachFocus; }); }\r\n};\r\nvar DEFAULT_CSS_TEXT = function () { return import('./default-styles.js').then(function (cssM) { return cssM['default']; }); };\r\nvar DialogConfiguration = (function () {\r\n    function DialogConfiguration(frameworkConfiguration, applySetter) {\r\n        var _this = this;\r\n        this.renderer = 'ux';\r\n        this.cssText = DEFAULT_CSS_TEXT;\r\n        this.resources = [];\r\n        this.fwConfig = frameworkConfiguration;\r\n        this.settings = frameworkConfiguration.container.get(DefaultDialogSettings);\r\n        applySetter(function () { return _this._apply(); });\r\n    }\r\n    DialogConfiguration.prototype._apply = function () {\r\n        var _this = this;\r\n        var renderer = this.renderer;\r\n        var cssText = this.cssText;\r\n        return Promise\r\n            .all([\r\n            typeof renderer === 'string' ? RENDERRERS[renderer]() : renderer,\r\n            cssText\r\n                ? typeof cssText === 'string'\r\n                    ? cssText\r\n                    : cssText()\r\n                : ''\r\n        ])\r\n            .then(function (_a) {\r\n            var rendererImpl = _a[0], $cssText = _a[1];\r\n            var fwConfig = _this.fwConfig;\r\n            fwConfig.transient(Renderer, rendererImpl);\r\n            if ($cssText) {\r\n                DOM.injectStyles($cssText);\r\n            }\r\n            return Promise\r\n                .all(_this.resources.map(function (name) { return DEFAULT_RESOURCES[name](); }))\r\n                .then(function (modules) {\r\n                fwConfig.globalResources(modules);\r\n            });\r\n        });\r\n    };\r\n    DialogConfiguration.prototype.useDefaults = function () {\r\n        return this\r\n            .useRenderer('ux')\r\n            .useCSS(DEFAULT_CSS_TEXT)\r\n            .useStandardResources();\r\n    };\r\n    DialogConfiguration.prototype.useStandardResources = function () {\r\n        Object.keys(DEFAULT_RESOURCES).forEach(this.useResource, this);\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useResource = function (resourceName) {\r\n        this.resources.push(resourceName);\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useRenderer = function (renderer, settings) {\r\n        this.renderer = renderer;\r\n        if (settings) {\r\n            Object.assign(this.settings, settings);\r\n        }\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useCSS = function (cssText) {\r\n        this.cssText = cssText;\r\n        return this;\r\n    };\r\n    return DialogConfiguration;\r\n}());\n\nfunction whenClosed(onfulfilled, onrejected) {\r\n    return this.then(function (r) { return r.wasCancelled ? r : r.closeResult; }).then(onfulfilled, onrejected);\r\n}\r\nfunction asDialogOpenPromise(promise) {\r\n    promise.whenClosed = whenClosed;\r\n    return promise;\r\n}\r\nvar DialogService = (function () {\r\n    function DialogService(container, compositionEngine, defaultSettings) {\r\n        this.controllers = [];\r\n        this.hasOpenDialog = false;\r\n        this.hasActiveDialog = false;\r\n        this.container = container;\r\n        this.compositionEngine = compositionEngine;\r\n        this.defaultSettings = defaultSettings;\r\n    }\r\n    DialogService.prototype.validateSettings = function (settings) {\r\n        if (!settings.viewModel && !settings.view) {\r\n            throw new Error('Invalid Dialog Settings. You must provide \"viewModel\", \"view\" or both.');\r\n        }\r\n    };\r\n    DialogService.prototype.createCompositionContext = function (childContainer, host, settings) {\r\n        return {\r\n            container: childContainer.parent,\r\n            childContainer: childContainer,\r\n            bindingContext: null,\r\n            viewResources: null,\r\n            model: settings.model,\r\n            view: settings.view,\r\n            viewModel: settings.viewModel,\r\n            viewSlot: new ViewSlot(host, true),\r\n            host: host\r\n        };\r\n    };\r\n    DialogService.prototype.ensureViewModel = function (compositionContext) {\r\n        if (typeof compositionContext.viewModel === 'object') {\r\n            return Promise.resolve(compositionContext);\r\n        }\r\n        return this.compositionEngine.ensureViewModel(compositionContext);\r\n    };\r\n    DialogService.prototype._cancelOperation = function (rejectOnCancel) {\r\n        if (!rejectOnCancel) {\r\n            return { wasCancelled: true };\r\n        }\r\n        throw createDialogCancelError();\r\n    };\r\n    DialogService.prototype.composeAndShowDialog = function (compositionContext, dialogController) {\r\n        var _this = this;\r\n        if (!compositionContext.viewModel) {\r\n            compositionContext.bindingContext = { controller: dialogController };\r\n        }\r\n        return this.compositionEngine\r\n            .compose(compositionContext)\r\n            .then(function (controller) {\r\n            dialogController.controller = controller;\r\n            return dialogController.renderer\r\n                .showDialog(dialogController)\r\n                .then(function () {\r\n                _this.controllers.push(dialogController);\r\n                _this.hasActiveDialog = _this.hasOpenDialog = !!_this.controllers.length;\r\n            }, function (reason) {\r\n                if (controller.viewModel) {\r\n                    invokeLifecycle(controller.viewModel, 'deactivate');\r\n                }\r\n                return Promise.reject(reason);\r\n            });\r\n        });\r\n    };\r\n    DialogService.prototype.createSettings = function (settings) {\r\n        settings = Object.assign({}, this.defaultSettings, settings);\r\n        if (typeof settings.keyboard !== 'boolean' && !settings.keyboard) {\r\n            settings.keyboard = !settings.lock;\r\n        }\r\n        if (typeof settings.overlayDismiss !== 'boolean') {\r\n            settings.overlayDismiss = !settings.lock;\r\n        }\r\n        Object.defineProperty(settings, 'rejectOnCancel', {\r\n            writable: false,\r\n            configurable: true,\r\n            enumerable: true\r\n        });\r\n        this.validateSettings(settings);\r\n        return settings;\r\n    };\r\n    DialogService.prototype.open = function (settings) {\r\n        var _this = this;\r\n        if (settings === void 0) { settings = {}; }\r\n        settings = this.createSettings(settings);\r\n        var childContainer = settings.childContainer || this.container.createChild();\r\n        var resolveCloseResult;\r\n        var rejectCloseResult;\r\n        var closeResult = new Promise(function (resolve, reject) {\r\n            resolveCloseResult = resolve;\r\n            rejectCloseResult = reject;\r\n        });\r\n        var dialogController = childContainer.invoke(DialogController, [settings, resolveCloseResult, rejectCloseResult]);\r\n        childContainer.registerInstance(DialogController, dialogController);\r\n        closeResult.then(function () {\r\n            removeController(_this, dialogController);\r\n        }, function () {\r\n            removeController(_this, dialogController);\r\n        });\r\n        var compositionContext = this.createCompositionContext(childContainer, dialogController.renderer.getDialogContainer(), dialogController.settings);\r\n        var openResult = this.ensureViewModel(compositionContext).then(function (compositionContext) {\r\n            if (!compositionContext.viewModel) {\r\n                return true;\r\n            }\r\n            return invokeLifecycle(compositionContext.viewModel, 'canActivate', dialogController.settings.model);\r\n        }).then(function (canActivate) {\r\n            if (!canActivate) {\r\n                return _this._cancelOperation(dialogController.settings.rejectOnCancel);\r\n            }\r\n            return _this.composeAndShowDialog(compositionContext, dialogController)\r\n                .then(function () { return ({ controller: dialogController, closeResult: closeResult, wasCancelled: false }); });\r\n        });\r\n        return asDialogOpenPromise(openResult);\r\n    };\r\n    DialogService.prototype.closeAll = function () {\r\n        return Promise.all(this.controllers.slice(0).map(function (controller) {\r\n            if (!controller.settings.rejectOnCancel) {\r\n                return controller.cancel().then(function (result) {\r\n                    if (result.wasCancelled) {\r\n                        return controller;\r\n                    }\r\n                    return null;\r\n                });\r\n            }\r\n            return controller.cancel().then(function () { return null; }).catch(function (reason) {\r\n                if (reason.wasCancelled) {\r\n                    return controller;\r\n                }\r\n                throw reason;\r\n            });\r\n        })).then(function (unclosedControllers) { return unclosedControllers.filter(function (unclosed) { return !!unclosed; }); });\r\n    };\r\n    DialogService.inject = [Container, CompositionEngine, DefaultDialogSettings];\r\n    return DialogService;\r\n}());\r\nfunction removeController(service, dialogController) {\r\n    var i = service.controllers.indexOf(dialogController);\r\n    if (i !== -1) {\r\n        service.controllers.splice(i, 1);\r\n        service.hasActiveDialog = service.hasOpenDialog = !!service.controllers.length;\r\n    }\r\n}\n\nfunction configure(frameworkConfig, callback) {\r\n    var applyConfig = null;\r\n    var config = new DialogConfiguration(frameworkConfig, function (apply) { applyConfig = apply; });\r\n    if (typeof callback === 'function') {\r\n        callback(config);\r\n    }\r\n    else {\r\n        config.useDefaults();\r\n    }\r\n    return applyConfig();\r\n}\n\nexport { DefaultDialogSettings, DialogConfiguration, DialogService, configure };\n//# sourceMappingURL=aurelia-dialog.js.map\n"],"sourceRoot":""}